<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Keranjang - MyShop</title>
  <style>
    /* simple reset & base */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif}
    body{background:#f7f8fb;color:#222}

    /* navbar */
    .navbar{background:#1e40af;padding:14px 28px;color:#fff}
    .logo{font-weight:700;font-size:20px}
    .logo span{color:#60a5fa}

    /* wrapper */
    .cart-container{max-width:980px;margin:28px auto;padding:0 16px}

    /* card */
    .card{background:#fff;border-radius:12px;padding:20px;box-shadow:0 6px 20px rgba(18,38,63,0.06)}
    .card h2{color:#1e3a8a;margin-bottom:14px;font-size:18px}

    /* item */
    .cart-list{display:flex;flex-direction:column;gap:12px}
    .cart-item{display:flex;gap:16px;align-items:center;padding:12px;border-radius:10px;border:1px solid #eef2f7}
    .cart-item img{width:86px;height:86px;object-fit:cover;border-radius:8px;border:1px solid #eef2f7}
    .item-info{flex:1;min-width:0}
    .item-info h3{font-size:16px;color:#111827;margin-bottom:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .price{color:#2563eb;font-weight:700;margin-bottom:8px}

    /* qty control */
    .quantity-control{display:inline-flex;align-items:center;border-radius:8px;background:#f3f4f6;padding:4px}
    .qty-btn{width:34px;height:34px;border:0;background:transparent;cursor:pointer;font-size:18px;display:inline-flex;align-items:center;justify-content:center}
    .qty-display{min-width:28px;text-align:center;font-weight:600}

    /* item-right */
    .item-right{text-align:right;min-width:120px}
    .item-subtotal{display:block;font-weight:700;color:#0f172a}

    /* actions */
    .item-actions{display:flex;gap:8px;align-items:center;justify-content:flex-end}
    .btn, .btn-ghost{cursor:pointer;border-radius:8px;padding:8px 12px;font-weight:600}
    .btn{background:#2563eb;color:#fff;border:0}
    .btn:hover{background:#1e3a8a}
    .btn-ghost{background:#f3f4f6;border:1px solid #e6eefc;color:#111}

    /* footer */
    .cart-footer{display:flex;justify-content:space-between;align-items:center;margin-top:18px;border-top:1px solid #eef2f7;padding-top:16px}
    .total-label{font-weight:700;color:#0f172a}
    .total-amount{font-size:18px;color:#0f172a;font-weight:800}

    /* responsive */
    @media (max-width:640px){
      .cart-item{flex-direction:column;align-items:flex-start}
      .item-right{text-align:left;width:100%}
      .item-actions{width:100%;justify-content:space-between;margin-top:8px}
      .cart-footer{flex-direction:column;gap:12px;align-items:stretch}
    }
  </style>
</head>
<body>
  <header class="navbar">
    <div class="logo">My<span>Shop</span></div>
  </header>

  <main class="cart-container">
    <div class="card" aria-live="polite">
      <h2>Keranjang Belanja</h2>

      <!-- daftar item -->
      <div id="cart-list" class="cart-list">
        <!-- contoh item 1 -->
        <div class="cart-item" data-price="119000">
          <img src="https://via.placeholder.com/200x200?text=Sneakers" alt="Sneakers">
          <div class="item-info">
            <h3>Sneakers Sport Edition</h3>
            <div class="price">Rp119.000</div>

            <div class="quantity-control" aria-label="Kontrol jumlah">
              <button class="qty-btn" data-action="decrease" aria-label="Kurangi">−</button>
              <div class="qty-display" data-qty>1</div>
              <button class="qty-btn" data-action="increase" aria-label="Tambah">+</button>
            </div>
          </div>

          <div class="item-right">
            <div class="item-subtotal" data-subtotal>Rp119.000</div>
            <div class="item-actions">
              <button class="btn-ghost remove-btn" type="button">Hapus</button>
            </div>
          </div>
        </div>

        <!-- contoh item 2 -->
        <div class="cart-item" data-price="79000">
          <img src="https://via.placeholder.com/200x200?text=Kaos" alt="Kaos">
          <div class="item-info">
            <h3>Kaos Casual</h3>
            <div class="price">Rp79.000</div>

            <div class="quantity-control" aria-label="Kontrol jumlah">
              <button class="qty-btn" data-action="decrease" aria-label="Kurangi">−</button>
              <div class="qty-display" data-qty>1</div>
              <button class="qty-btn" data-action="increase" aria-label="Tambah">+</button>
            </div>
          </div>

          <div class="item-right">
            <div class="item-subtotal" data-subtotal>Rp79.000</div>
            <div class="item-actions">
              <button class="btn-ghost remove-btn" type="button">Hapus</button>
            </div>
          </div>
        </div>
      </div>

      <!-- footer -->
      <div class="cart-footer">
        <div>
          <div class="total-label">Subtotal</div>
          <div class="total-amount" id="total-amount">Rp198.000</div>
        </div>

        <div style="display:flex;gap:10px;align-items:center">
          <button class="btn-ghost" onclick="clearCart()">Kosongkan</button>
          <button class="btn" onclick="goCheckout()">Checkout</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    // aman: jalankan setelah DOM siap
    document.addEventListener('DOMContentLoaded', () => {
      const cartList = document.getElementById('cart-list');
      const totalAmountEl = document.getElementById('total-amount');

      // helper format Rupiah
      const formatRp = n => 'Rp' + Number(n).toLocaleString('id-ID');

      function recalcItem(itemEl) {
        const price = parseInt(itemEl.dataset.price, 10) || 0;
        const qtyEl = itemEl.querySelector('[data-qty]');
        const subtotalEl = itemEl.querySelector('[data-subtotal]');
        const qty = Math.max(1, parseInt(qtyEl.textContent, 10) || 1);
        subtotalEl.textContent = formatRp(price * qty);
      }

      function recalcTotal() {
        let total = 0;
        cartList.querySelectorAll('.cart-item').forEach(itemEl => {
          const price = parseInt(itemEl.dataset.price, 10) || 0;
          const qty = Math.max(1, parseInt(itemEl.querySelector('[data-qty]').textContent, 10) || 1);
          total += price * qty;
        });
        totalAmountEl.textContent = formatRp(total);
      }

      // initialize values (in case HTML has non-1 qty or initial items)
      cartList.querySelectorAll('.cart-item').forEach(itemEl => recalcItem(itemEl));
      recalcTotal();

      // event delegation for qty buttons and remove
      cartList.addEventListener('click', (e) => {
        const btn = e.target.closest('.qty-btn, .remove-btn');
        if (!btn) return;

        const itemEl = btn.closest('.cart-item');
        if (!itemEl) return;

        // quantity buttons
        if (btn.classList.contains('qty-btn')) {
          const action = btn.dataset.action;
          const qtyEl = itemEl.querySelector('[data-qty]');
          let qty = parseInt(qtyEl.textContent, 10) || 1;
          if (action === 'increase') qty++;
          else if (action === 'decrease') qty = Math.max(1, qty - 1);
          qtyEl.textContent = qty;
          recalcItem(itemEl);
          recalcTotal();
          return;
        }

        // remove button
        if (btn.classList.contains('remove-btn')) {
          itemEl.remove();
          recalcTotal();
          // if cart empty, show friendly message
          if (!cartList.querySelector('.cart-item')) {
            cartList.innerHTML = '<p style="color:#6b7280;padding:18px">Keranjang kosong.</p>';
            totalAmountEl.textContent = formatRp(0);
          }
          return;
        }
      });

      // expose some small helpers to global so other buttons work
      window.goCheckout = () => {
        // simple example: send to checkout.html
        // you can extend: persist cart to localStorage, call API, etc.
        window.location.href = 'checkout.html';
      };

      window.clearCart = () => {
        cartList.innerHTML = '<p style="color:#6b7280;padding:18px">Keranjang kosong.</p>';
        totalAmountEl.textContent = formatRp(0);
      };
    });
  </script>
</body>
</html>
